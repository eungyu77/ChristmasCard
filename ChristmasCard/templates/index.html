<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í¬ë¦¬ìŠ¤ë§ˆìŠ¤ í¸ì§€í•¨</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
</head>
<body>
    <h1>ğŸ„ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ í¸ì§€í•¨ ğŸ„</h1>
    
   <!-- í¸ì§€ ì“°ê¸° ë²„íŠ¼ -->
   <button onclick="toggleWriteLetter()">ğŸ–‹ï¸ í¸ì§€ ì“°ê¸°</button>

   <!-- í¸ì§€ ì“°ê¸° ì„¹ì…˜ (ì´ˆê¸° ìƒíƒœëŠ” ìˆ¨ê¹€) -->
   <div id="write-letter-section" style="display:none;">
       <h2>í¸ì§€ ì“°ê¸°</h2>
       <form action="{{ url_for('write_letter') }}" method="post" enctype="multipart/form-data">
           <label for="name">ì´ë¦„:</label>
           <input type="text" id="name" name="name" required>
           
           <label for="content">ë‚´ìš©:</label>
           <textarea id="content" name="content" required></textarea>
           
           <label for="image">ì´ë¯¸ì§€ ì²¨ë¶€:</label>
           <input type="file" id="image" name="image" accept="image/*">
           
           <button type="submit">ğŸ í¸ì§€ ë³´ë‚´ê¸°</button>
       </form>
   </div>

   <!-- ë°›ì€ í¸ì§€ ëª©ë¡ ì„¹ì…˜ -->
   <div class="letter-list">
    {% for letter in letters %}
        <div class="letter" onclick="toggleLetterContent(event, 'content-{{ loop.index0 }}')">
            <h3>From: {{ letter.name }}</h3>
            {% if letter.image %}
                <img src="{{ url_for('static', filename='uploads/' + letter.image) }}" alt="ì²¨ë¶€ ì´ë¯¸ì§€">
            {% endif %}
            <div id="content-{{ loop.index0 }}" class="letter-content">
    <p>ğŸ“… {{ letter.date }}</p>
    <p>{{ letter.content }}</p>
    <div class="letter-actions">
        <a href="{{ url_for('edit_letter', index=loop.index0) }}" class="edit-btn">âœï¸ ìˆ˜ì •</a>
        <form action="{{ url_for('delete_letter', index=loop.index0) }}" method="POST" onsubmit="return confirm('ì •ë§ë¡œ ì´ í¸ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
            <button type="submit" class="delete-btn">ğŸ—‘ï¸ ì‚­ì œ</button>
        </form>
    </div>
</div>

        </div>
    {% endfor %}
</div>

   <script>
       function toggleWriteLetter() {
           const writeLetterSection = document.getElementById('write-letter-section');
           if (writeLetterSection.style.display === 'none' || writeLetterSection.style.display === '') {
               writeLetterSection.style.display = 'block';
           } else {
               writeLetterSection.style.display = 'none';
           }
       }

       function toggleLetterContent(event, letterId) {
           event.stopPropagation(); // ì´ë²¤íŠ¸ ë²„ë¸”ë§ ë°©ì§€
           const content = document.getElementById(letterId);
           if (content.style.display === 'none' || content.style.display === '') {
               content.style.display = 'block';
           } else {
               content.style.display = 'none';
           }
       }

   </script>
    
</body>
</html>
